#!/bin/bash

cd $(dirname $0)/..  # change to the correct directory

if [[ $# -eq 0 ]] 
then
    >&2 echo "You need at least one argument."
    >&2 echo "   correct usage is: "
    >&2 echo "     mkchp <chapter-name> "
    >&2 echo "     mkchp <appendix-name> app "
    exit 1
fi

if [[ $# -eq 2 ]] 
then
    root="appendix"
else
    root="chapter"
fi






# define the chapter name
name=$root"_"$1

# Check to see if the directory already exists
if [ -d $name ] 
then
    >&2 echo "$name already exists"
    exit 1
fi

mkdir $name   # Make the directory
cd $name      # change to the directory

tex=$1".tex"

# Create the tex file
touch $tex
echo "\\chapter{<++>}"    >> $tex
echo "\\label{chap:<++>}" >> $tex
echo ""                   >> $tex
echo "\\section{<++>}"    >> $tex
echo "\\label{sec:<++>}"  >> $tex

mkdir figures # create the figures directory
mkdir tables  # create the tables directory
mkdir data    # create the data directory
mkdir plots   # create the plotting directory





